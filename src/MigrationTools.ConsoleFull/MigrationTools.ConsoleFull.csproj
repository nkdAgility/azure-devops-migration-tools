<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net472</TargetFramework>
    <Product>Azure DevOps Migration Tools [Object Model]</Product>
    <AssemblyName>migration</AssemblyName>
    <PlatformTarget>AnyCPU</PlatformTarget>
  </PropertyGroup>

  <ItemGroup>
    <Content Include="..\..\configuration.json" Link="configuration.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <Content Include="..\..\configuration2.json" Link="configuration2.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\MigrationTools.Clients.AzureDevops.Rest\MigrationTools.Clients.AzureDevops.Rest.csproj" />
    <ProjectReference Include="..\MigrationTools.Clients.FileSystem\MigrationTools.Clients.FileSystem.csproj" />
    <ProjectReference Include="..\MigrationTools.Clients.InMemory\MigrationTools.Clients.InMemory.csproj" />
    <ProjectReference Include="..\MigrationTools.Host\MigrationTools.Host.csproj" />
    <ProjectReference Include="..\MigrationTools.Clients.AzureDevops.ObjectModel\MigrationTools.Clients.AzureDevops.ObjectModel.csproj" />
    <ProjectReference Include="..\VstsSyncMigrator.Core\VstsSyncMigrator.Core.csproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Update="Newtonsoft.Json" Version="13.0.1" />
  </ItemGroup>

	<Target Name="PostBuild" AfterTargets="PostBuildEvent">
		<Exec Command="cd $(TargetDir)&#xD;&#xA;$(TargetName).exe init --config &quot;$(SolutionDir)\docs\Reference\Generated\configuration.config&quot;&#xD;&#xA;$(TargetName).exe init --options Full --config &quot;$(SolutionDir)\docs\Reference\Generated\configuration-full.config&quot;&#xD;&#xA;$(TargetName).exe init --options WorkItemTracking --config &quot;$(SolutionDir)\docs\Reference\Generated\configuration-WorkItemTracking.config&quot;&#xD;&#xA;$(TargetName).exe init --options Fullv2 --config &quot;$(SolutionDir)\docs\Reference\Generated\configuration-Fullv2.config&quot;&#xD;&#xA;$(TargetName).exe init --options WorkItemTrackingv2--config &quot;$(SolutionDir)\docs\Reference\Generated\configuration-WorkItemTrackingv2.config&quot;" />
	</Target>
</Project>