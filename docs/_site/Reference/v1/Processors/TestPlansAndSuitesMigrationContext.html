<h2 id="processors-testplansandsuitesmigrationcontext">Processors: TestPlansAndSuitesMigrationContext</h2>

<blockquote>
  <p><strong><em>This documentation is for a preview version of the Azure DevOps Migration Tools.</em> If you are not using the preview version then please head over to the main <a href="https://nkdagility.github.io/azure-devops-migration-tools">documentation</a>.</strong></p>
</blockquote>

<p><a href="/azure-devops-migration-tools/">Overview</a> &gt; <a href="/azure-devops-migration-tools/Reference/">Reference</a> &gt; <a href="/azure-devops-migration-tools/Reference/v1/">API v1</a> &gt; <a href="/azure-devops-migration-tools/Reference/v1/Processors/">Processors</a>&gt; <strong>TestPlansAndSuitesMigrationContext</strong></p>

<p>Rebuilds Suits and plans for Test Cases migrated using the WorkItemMigration</p>

<blockquote>
  <p>Warning: This migration can result in data lost because unsafe links are not able to migrate! (see description for parameter <code class="language-plaintext highlighter-rouge">RemoveInvalidTestSuiteLinks</code> or <a href="https://github.com/nkdAgility/azure-devops-migration-tools/issues/178">this issue</a>.)</p>
</blockquote>

<h3 id="options">Options</h3>

<table>
  <thead>
    <tr>
      <th>Parameter name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AreaMaps</td>
      <td>Dictionary</td>
      <td>See documentation for <a href="/docs/Reference/v1/Processors/WorkItemMigrationConfig.md">NodeStructure</a></td>
      <td>null</td>
    </tr>
    <tr>
      <td>Enabled</td>
      <td>Boolean</td>
      <td>missng XML code comments</td>
      <td>missng XML code comments</td>
    </tr>
    <tr>
      <td>FilterCompleted</td>
      <td>Boolean</td>
      <td>missng XML code comments</td>
      <td>missng XML code comments</td>
    </tr>
    <tr>
      <td>IterationMaps</td>
      <td>Dictionary</td>
      <td>See documentation for <a href="/docs/Reference/v1/Processors/WorkItemMigrationConfig.md">NodeStructure</a></td>
      <td>null</td>
    </tr>
    <tr>
      <td>MigrationDelay</td>
      <td>Int32</td>
      <td>??Not sure what this does. Check code.</td>
      <td>0</td>
    </tr>
    <tr>
      <td>NodeBasePaths</td>
      <td>String[]</td>
      <td>See documentation for <a href="/docs/Reference/v1/Processors/WorkItemMigrationConfig.md">NodeStructure</a></td>
      <td>[]</td>
    </tr>
    <tr>
      <td>OnlyElementsWithTag</td>
      <td>String</td>
      <td>The tag name that is present on all elements that must be migrated. If this option isnâ€™t present this processor will migrate all.</td>
      <td><code class="language-plaintext highlighter-rouge">String.Empty</code></td>
    </tr>
    <tr>
      <td>PrefixProjectToNodes</td>
      <td>Boolean</td>
      <td>Prefix the nodes with the new project name.</td>
      <td>false</td>
    </tr>
    <tr>
      <td>RemoveAllLinks</td>
      <td>Boolean</td>
      <td>??Not sure what this does. Check code.</td>
      <td>false</td>
    </tr>
    <tr>
      <td>RemoveInvalidTestSuiteLinks</td>
      <td>Boolean</td>
      <td>Remove Invalid Links, see https://github.com/nkdAgility/azure-devops-migration-tools/issues/178</td>
      <td>missng XML code comments</td>
    </tr>
    <tr>
      <td>TestPlanQueryBit</td>
      <td>String</td>
      <td>Filtering conditions to decide whether to migrate a test plan or not. When provided, this partial query is added after <code class="language-plaintext highlighter-rouge">Select * From TestPlan Where</code> when selecting test plans. Among filtering options, <code class="language-plaintext highlighter-rouge">AreaPath</code>, <code class="language-plaintext highlighter-rouge">PlanName</code> and <code class="language-plaintext highlighter-rouge">PlanState</code> are known to work. There is unfortunately no documentation regarding the available fields.</td>
      <td><code class="language-plaintext highlighter-rouge">String.Empty</code></td>
    </tr>
    <tr>
      <td>UseCommonNodeStructureEnricherConfig</td>
      <td>Boolean</td>
      <td>Indicates whether the configuration for node structure transformation should be taken from the common enricher configs. Otherwise the configuration elements below are used</td>
      <td>false</td>
    </tr>
  </tbody>
</table>

<h3 id="example-json">Example JSON</h3>

<pre><code class="language-JSON">{
  "$type": "TestPlansAndSuitesMigrationConfig",
  "Enabled": false,
  "PrefixProjectToNodes": false,
  "OnlyElementsWithTag": null,
  "TestPlanQueryBit": null,
  "RemoveAllLinks": false,
  "MigrationDelay": 0,
  "UseCommonNodeStructureEnricherConfig": false,
  "NodeBasePaths": null,
  "AreaMaps": null,
  "IterationMaps": null,
  "RemoveInvalidTestSuiteLinks": false,
  "FilterCompleted": false
}
</code></pre>

<h3 id="additional-samples--info">Additional Samples &amp; Info</h3>

<p>To run a full plans and suits you should run the three processors in this order below.  <code class="language-plaintext highlighter-rouge">TestVariablesMigrationConfig</code> and <code class="language-plaintext highlighter-rouge">TestConfigurationsMigrationConfig</code> only need run once.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"Processors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"$type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestVariablesMigrationConfig"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"$type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestConfigurationsMigrationConfig"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"$type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestPlansAndSuitesMigrationConfig"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PrefixProjectToNodes"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"OnlyElementsWithTag"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"TestPlanQueryBit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"RemoveAllLinks"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"MigrationDelay"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"UseCommonNodeStructureEnricherConfig"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"NodeBasePaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"AreaMaps"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"IterationMaps"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"RemoveInvalidTestSuiteLinks"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"FilterCompleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>
<h2 id="known-working-testplanquerybit-filter-fields-names">Known working TestPlanQueryBit filter fields names</h2>

<p><code class="language-plaintext highlighter-rouge">AreaPath</code>, <code class="language-plaintext highlighter-rouge">PlanName</code> and <code class="language-plaintext highlighter-rouge">PlanState</code></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"TestPlanQueryBit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PlanName = 'ABC'"</span><span class="w">
</span></code></pre></div></div>
